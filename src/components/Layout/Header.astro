---
import OsucIcon from "@/components/Icons/OsucIcon.astro";
import MenuIcon from "@/components/Icons/MenuIcon.astro";
import InstagramIcon from "@/components/Icons/InstagramIcon.astro";
import TelegramIcon from "@/components/Icons/TelegramIcon.astro";
import GitHubIcon from "@/components/Icons/GitHubIcon.astro";
import DiscordIcon from "@/components/Icons/DiscordIcon.astro";
---

<header
    class="sticky top-0 z-50 w-full bg-background text-foreground transition-all duration-200"
    id="nav-header"
>
    <input
        type="checkbox"
        name="menu-toggle"
        id="menu-toggle"
        class="hidden peer/menu"
    />

    <div class="flex justify-between px-4 md:px-8 py-4 items-center">
        <a
            href="/"
            class="flex items-center gap-2 md:gap-4 text-xl md:text-2xl font-bold align-middle"
        >
            <OsucIcon size={32} className="md:w-10 md:h-10" />
            <h1 class="hidden sm:block">Open Source UC</h1>
        </a>

        <nav class="hidden md:block">
            <ul class="flex gap-8 items-center [&>li]:text-lg">
                <li>
                    <a href="/about" class="hover:underline">About US</a>
                </li>
                <li>
                    <a href="/#projects" class="hover:underline">Projects</a>
                </li>
            </ul>
        </nav>

        <label
            for="menu-toggle"
            class="md:hidden z-50 cursor-pointer text-foreground relative"
        >
            <MenuIcon size={32} />
        </label>
    </div>

    <!-- Mobile menu -->
    <nav
        id="mobile-menu"
        class="md:hidden fixed top-0 -right-full peer-checked/menu:right-0 w-full h-screen bg-background transition-all duration-300 z-55"
    >
        <div
            class="flex flex-col h-full justify-between p-8 pt-20 safe-bottom-extra"
        >
            <!-- Botón de cerrar -->
            <label
                for="menu-toggle"
                class="absolute top-6 right-6 cursor-pointer text-foreground hover:text-primary transition-colors"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="32"
                    height="32"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </label>

            <!-- Logo y título -->
            <div class="flex flex-col gap-8">
                <div class="flex items-center gap-4">
                    <OsucIcon size={48} />
                    <h2 class="text-3xl font-bold">Open Source UC</h2>
                </div>

                <!-- Links de navegación -->
                <ul class="flex flex-col gap-6 text-2xl">
                    <li>
                        <a
                            href="/"
                            class="hover:text-primary transition-colors block"
                            >Home</a
                        >
                    </li>
                    <li>
                        <a
                            href="/about"
                            class="hover:text-primary transition-colors block"
                            >About US</a
                        >
                    </li>
                    <li>
                        <a
                            href="/#projects"
                            class="hover:text-primary transition-colors block"
                            >Projects</a
                        >
                    </li>
                    <li>
                        <a
                            href="/conduct"
                            class="hover:text-primary transition-colors block"
                            >Code of Conduct</a
                        >
                    </li>
                </ul>
            </div>

            <!-- Redes sociales -->
            <div class="flex flex-col gap-6 safe-bottom">
                <h3 class="text-xl font-semibold text-foreground/80">
                    Síguenos
                </h3>
                <div class="flex gap-6">
                    <a
                        href="https://instagram.com/osuc.dev"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="Instagram Open Source UC"
                        class="hover:text-[#c13584] transition-colors"
                    >
                        <InstagramIcon size={32} />
                    </a>
                    <a
                        href="https://t.me/+zQdotSmFEIRkMzcx"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="Telegram Open Source UC"
                        class="hover:text-[#24A1DE] transition-colors"
                    >
                        <TelegramIcon size={32} />
                    </a>
                    <a
                        href="https://discord.gg/jRdQCGn6yS"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="Discord Open Source UC"
                        class="hover:text-[#5865F2] transition-colors"
                    >
                        <DiscordIcon size={32} />
                    </a>
                    <a
                        href="https://github.com/open-source-uc"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="GitHub Open Source UC"
                        class="hover:text-[#181717] transition-colors"
                    >
                        <GitHubIcon size={32} />
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Overlay para cerrar el menú al hacer click fuera -->
    <label
        for="menu-toggle"
        class="md:hidden fixed inset-0 bg-black/50 opacity-0 peer-checked/menu:opacity-100 peer-checked/menu:pointer-events-auto pointer-events-none transition-opacity duration-300 z-54"
    ></label>
</header>

<!-- Script para ocultar el header al hacer scroll -->

<!-- <script>
    let lastScrollTop = 0;
    let scrollStartPosition = 0;
    let isScrollingDown = false;
    const header = document.getElementById("nav-header");
    const scrollThreshold = 50;

    if (!header) {
        throw new Error("Header element not found");
    }

    window.addEventListener("scroll", () => {
        const scrollTop =
            window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop > lastScrollTop && !isScrollingDown) {
            isScrollingDown = true;
            scrollStartPosition = lastScrollTop;
        } else if (scrollTop < lastScrollTop && isScrollingDown) {
            isScrollingDown = false;
            scrollStartPosition = lastScrollTop;
        }

        if (
            isScrollingDown &&
            scrollTop - scrollStartPosition > scrollThreshold
        ) {
            header.style.transform = "translateY(-100%)";
        } else if (!isScrollingDown) {
            header.style.transform = "translateY(0)";
        }

        lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    });
</script> -->
